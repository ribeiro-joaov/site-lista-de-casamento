<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Lista de presentes</title>
  </head>
  <body>
    <h1>
      Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corrupti error
      minus enim. Architecto, harum aspernatur soluta, provident iure ut
      excepturi nemo mollitia rerum, voluptatum molestiae impedit reprehenderit.
      Odit, facere eveniet.
    </h1>
    <html>
      <style>
        #myProgress {
          width: 80%;
          background-color: #ddd;
        }
        #myBar {
          width: 0%;
          height: 30px;
          background-color: #4caf50;
          text-align: center;
          line-height: 30px;
          color: white;
        }
      </style>
      <body>
        <div id="myProgress">
          <div id="myBar">0%</div>
        </div>
        <br />
        <label for="current-value">Valor Atual</label>
        <input type="text" class="form-control" id="current-value" required />
        <label for="total">Valor do Item</label>
        <input type="text" class="form-control" id="total" min="0" required />
        <hr />
        <label for="contribuition">Contribuição</label>
        <input type="text" class="form-control" id="contribuition" required />

        <button type="button" onclick="change_progress()">Pagar</button>
      </body>
    </html>
    <script>
      function change_progress() {
        var elem = document.getElementById("myBar");

        var currentValueElement = document.getElementById("current-value");
        var current = parseInt(currentValueElement.value) || 0;

        var contribuitionElement = document.getElementById("contribuition");
        var contribuition = parseInt(contribuitionElement.value);

        var total = parseInt(document.getElementById("total").value);

        var currentPercentage = ((current + contribuition) / total) * 100;
        currentValueElement.value = current + contribuition;
        contribuitionElement.value = 0;

        var width = 0;

        var id = setInterval(frame);
        function frame() {
          if (width <= 100) {
            width++;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
          } else {
            elem.innerHTML = currentPercentage + "%";
            clearInterval(id);
          }
        }
      }
    </script>
  </body>
</html>
